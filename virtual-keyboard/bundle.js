(()=>{"use strict";const t=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight"],e=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del","Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","\\","z","x","c","v","b","n","m",",",".","/","ᐱ","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","❮","ᐯ","❯"],a=["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","Del","Caps Lock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","\\","я","ч","с","м","и","т","ь","б","ю",".","ᐱ","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","❮","ᐯ","❯"],r=["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Del","Caps Lock","A","S","D","F","G","H","J","K","L",":",'"',"Enter","Shift","|","Z","X","C","V","B","N","M","<",">","?","ᐱ","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","❮","ᐯ","❯"],c=["Ё","!",'"',"№",";","%",":","?","*","(",")","_","+","Backspace","Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","/","Del","Caps Lock","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","Enter","Shift","/","Я","Ч","С","М","И","Т","Ь","Б","Ю",",","ᐱ","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","❮","ᐯ","❯"],i=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","[","]","\\","Del","Caps Lock","A","S","D","F","G","H","J","K","L",";","'","Enter","Shift","\\","Z","X","C","V","B","N","M",",",".","/","ᐱ","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","❮","ᐯ","❯"],n=["Ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","X","Ъ","\\","Del","Caps Lock","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","Enter","Shift","\\","Я","Ч","С","М","И","Т","Ь","Б","Ю",".","ᐱ","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","❮","ᐯ","❯"],s=["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","{","}","|","Del","Caps Lock","a","s","d","f","g","h","j","k","l",":",'"',"Enter","Shift","|","z","x","c","v","b","n","m","<",">","?","ᐱ","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","❮","ᐯ","❯"],o=["ё","!",'"',"№",";","%",":","?","*","(",")","_","+","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","/","Del","Caps Lock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","/","я","ч","с","м","и","т","ь","б","ю",",","ᐱ","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","❮","ᐯ","❯"];class l{constructor(){this.lintVariable=0}addWrapper(){this.lintVariable+=1;const t=document.createElement("div");return t.classList.add("wrapper"),t}}class u{constructor(){this.lintVariable=0}addHeader(t){this.lintVariable+=1;const e=document.createElement("header");e.classList.add("header");const a=document.createElement("h1");return a.classList.add("header-title"),a.innerHTML=t,e.append(a),e}}class h{constructor(){this.lintVariable=0}addMain(t){this.lintVariable+=1;const e=document.createElement("main");return e.classList.add(t),e}addTextarea(t){this.lintVariable+=1;const e=document.createElement("textarea");return e.classList.add(t),e}addKeyboardWrapper(t){this.lintVariable+=1;const e=document.createElement("div");return e.classList.add(t),e}addInfo(t,e){this.lintVariable+=1;const a=document.createElement("div");a.classList.add("info-wrapper");const r=document.createElement("p");r.classList.add("info-text");const c=document.createElement("p");return c.classList.add("info-text"),r.innerHTML=t,c.innerHTML=e,a.append(r,c),a}}class d{constructor(){this.lintVariable=0}addFooter(t,e){this.lintVariable+=1;const a=document.createElement("footer");a.classList.add("footer");const r=document.createElement("a");return r.innerHTML=t,r.href=e,r.classList.add("footer-link"),a.append(r),a}}class L{constructor(){this.lintVariable=0}addKey(t){this.lintVariable+=1;const e=document.createElement("div");return e.classList.add("key"),e.classList.add(t),e}createKeys(t){const e=[];for(let a=0;a<t.length;a+=1){const r=this.addKey(t[a]);e.push(r)}return e}fillKeys(t,e){const a=e;this.lintVariable+=1;for(let e=0;e<t.length;e+=1)a[e].innerHTML=t[e]}}const S=new class{constructor(){this.allKeys=null,this.keysClass=new L,this.textarea=null}createContent(){const a=(new l).addWrapper(),r=(new u).addHeader("Virtual Keyboard"),c=(new d).addFooter("ReWired25","https://github.com/ReWired25"),i=new h,n=i.addMain("main");this.textarea=i.addTextarea("area"),this.textarea.setAttribute("autofocus","autofocus");const s=i.addKeyboardWrapper("keyboard-wrapper"),o=i.addInfo("The keyboard is created in Windows OS","Switch language: left shift + left alt");return this.allKeys=this.keysClass.createKeys(t),this.keysClass.fillKeys(e,this.allKeys),s.append(...this.allKeys),n.append(this.textarea,s,o),a.append(r,n,c),a}},g=new class{constructor(){this.currLanguage="en",this.currCtrl=null,this.currAlt=null}dictionarySwitcher(t,e){S.keysClass.fillKeys(t,S.allKeys),this.currLanguage=e,localStorage.setItem("currLang",e)}switchFunc(){"en"===this.currLanguage?this.dictionarySwitcher(a,"ru"):"ru"===this.currLanguage?this.dictionarySwitcher(e,"en"):"capsLockEn"===this.currLanguage?this.dictionarySwitcher(n,"capsLockRu"):"capsLockRu"===this.currLanguage?this.dictionarySwitcher(i,"capsLockEn"):"capsLockEnShift"===this.currLanguage?this.dictionarySwitcher(o,"capsLockRuShift"):"capsLockRuShift"===this.currLanguage&&this.dictionarySwitcher(s,"capsLockEnShift")}switchLanguage(t,e){e?"ControlLeft"===t.code?this.currCtrl=null:"AltLeft"===t.code&&(this.currAlt=null):("ControlLeft"===t.code?this.currCtrl=!0:"AltLeft"===t.code&&(this.currAlt=!0),this.currCtrl&&this.currAlt&&this.switchFunc())}};document.body.append(S.createContent()),S.textarea.onblur=()=>{S.textarea.focus()},window.onload=()=>{const t=localStorage.getItem("currLang");t&&("en"===t||"capsLockEn"===t||"enShift"===t||"capsLockEnShift"===t?g.dictionarySwitcher(e,"en"):"ru"!==t&&"capsLockRu"!==t&&"ruShift"!==t&&"capsLockRuShift"!==t||g.dictionarySwitcher(a,"ru"))};const f=new class{constructor(){this.currStatus=!0,this.shiftStatus=!1}switcher(){this.currStatus&&(this.shiftStatus?"enShift"===g.currLanguage?g.dictionarySwitcher(s,"capsLockEnShift"):"ruShift"===g.currLanguage?g.dictionarySwitcher(o,"capsLockRuShift"):"capsLockEnShift"===g.currLanguage?g.dictionarySwitcher(r,"enShift"):"capsLockRuShift"===g.currLanguage&&g.dictionarySwitcher(c,"ruShift"):"en"===g.currLanguage?g.dictionarySwitcher(i,"capsLockEn"):"ru"===g.currLanguage?g.dictionarySwitcher(n,"capsLockRu"):"capsLockEn"===g.currLanguage?g.dictionarySwitcher(e,"en"):"capsLockRu"===g.currLanguage&&g.dictionarySwitcher(a,"ru"))}},p=new class{constructor(){this.lintVariable=0,this.returnKeys=["Win","Alt","Ctrl"]}createListeners(){this.lintVariable+=1,S.allKeys.forEach((t=>{const l=t;this.returnKeys.includes(l.innerHTML)?this.lintVariable+=1:"Shift"===l.innerHTML?(l.onmousedown=()=>{"en"===g.currLanguage?g.dictionarySwitcher(r,"enShift"):"ru"===g.currLanguage?g.dictionarySwitcher(c,"ruShift"):"capsLockEn"===g.currLanguage?g.dictionarySwitcher(s,"capsLockEnShift"):"capsLockRu"===g.currLanguage&&g.dictionarySwitcher(o,"capsLockRuShift"),l.classList.add("active"),f.shiftStatus=!0},l.onmouseup=()=>{"enShift"===g.currLanguage?g.dictionarySwitcher(e,"en"):"ruShift"===g.currLanguage?g.dictionarySwitcher(a,"ru"):"capsLockEnShift"===g.currLanguage?g.dictionarySwitcher(i,"capsLockEn"):"capsLockRuShift"===g.currLanguage&&g.dictionarySwitcher(n,"capsLockRu"),l.classList.remove("active"),f.shiftStatus=!1}):"Caps Lock"===l.innerHTML?(l.onmousedown=()=>{f.switcher(),f.currStatus=!1},l.onmouseup=()=>{f.currStatus=!0}):l.classList.contains("Tab")?l.onclick=()=>S.textarea.setRangeText("    ",S.textarea.selectionStart,S.textarea.selectionEnd,"end"):l.classList.contains("Space")?l.onclick=()=>S.textarea.setRangeText(" ",S.textarea.selectionStart,S.textarea.selectionEnd,"end"):l.classList.contains("Backspace")?l.onclick=()=>{0===S.textarea.selectionStart&&S.textarea.selectionEnd-S.textarea.selectionStart<=0||(S.textarea.selectionEnd-S.textarea.selectionStart>0?S.textarea.setRangeText("",S.textarea.selectionStart,S.textarea.selectionEnd,"end"):S.textarea.setRangeText("",S.textarea.selectionStart-1,S.textarea.selectionEnd,"end"))}:l.classList.contains("Delete")?l.onclick=()=>S.textarea.setRangeText("",S.textarea.selectionStart,S.textarea.selectionEnd+1,"end"):l.classList.contains("Enter")?l.onclick=()=>S.textarea.setRangeText("\n",S.textarea.selectionStart,S.textarea.selectionEnd,"end"):l.onclick=()=>S.textarea.setRangeText(l.innerHTML,S.textarea.selectionStart,S.textarea.selectionEnd,"end")}))}};p.createListeners(),document.addEventListener("keydown",(e=>{e.preventDefault();const a=e.code;if(!t.includes(a))return;const i=t.indexOf(a);S.allKeys[i].classList.add("active"),g.switchLanguage(e),"ShiftLeft"!==a&&"ShiftRight"!==a||("en"===g.currLanguage?g.dictionarySwitcher(r,"enShift"):"ru"===g.currLanguage?g.dictionarySwitcher(c,"ruShift"):"capsLockEn"===g.currLanguage?g.dictionarySwitcher(s,"capsLockEnShift"):"capsLockRu"===g.currLanguage&&g.dictionarySwitcher(o,"capsLockRuShift"),f.shiftStatus=!0),"CapsLock"===a&&(f.switcher(),f.currStatus=!1);const n=S.textarea.selectionStart,l=S.textarea.selectionEnd;if(["MetaLeft","CapsLock","ShiftLeft","ShiftRight","ControlLeft","ControlRight","ControlAlt","AltLeft","AltRight","Del"].includes(a))p.lintVariable+=1;else if("Space"===a)S.textarea.setRangeText(" ",n,l,"end");else if("Tab"===a)S.textarea.setRangeText("    ",n,l,"end");else if("Backspace"===a){if(0===n&&l-n<=0)return;l-n>0?S.textarea.setRangeText("",n,l,"end"):S.textarea.setRangeText("",n-1,l,"end")}else"Delete"===a?S.textarea.setRangeText("",n,l+1,"end"):"Enter"===a?S.textarea.setRangeText("\n",n,l,"end"):S.textarea.setRangeText(S.allKeys[i].innerHTML,n,l,"end")})),document.addEventListener("keyup",(r=>{const c=r.code;if(!t.includes(c))return;const s=t.indexOf(c);S.allKeys[s].classList.remove("active"),g.switchLanguage(r,!0),"ShiftLeft"!==c&&"ShiftRight"!==c||("enShift"===g.currLanguage?g.dictionarySwitcher(e,"en"):"ruShift"===g.currLanguage?g.dictionarySwitcher(a,"ru"):"capsLockEnShift"===g.currLanguage?g.dictionarySwitcher(i,"capsLockEn"):"capsLockRuShift"===g.currLanguage&&g.dictionarySwitcher(n,"capsLockRu"),f.shiftStatus=!1),"CapsLock"===c&&(f.currStatus=!0)}))})();